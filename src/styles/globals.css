:root{
  /* Overlay foundation */
  --brand-bg:#0f2031;
  --brand-accent:#f59e0b;
  --brand-accent-fg:#0a1522;
  --surface-pop:#0f1b28;
  --surface-pop-2:#0a1522;
  --surface-ring:#1d334b;
  --text:#eaf0f7;
  --text-muted:#cfd7e4;
  --elev-shadow:0 24px 60px rgba(2,12,27,.45);
  --overlay:rgba(7,15,25,.55);
  --radius-xl:16px;
  --radius-lg:12px;
  --enter:160ms cubic-bezier(.2,.7,.25,1);
  --leave:130ms cubic-bezier(.2,.7,.25,1);

  /* Brand gradient */
  --brand-from:#0B1220;
  --brand-via:#0E1B35;
  --brand-to:#0E2A5E;

  /* Signature accent ("memory stripe", focus, progress) */
  --text-on-dark:#E6EDF6;
  --text-subtle:#B9C2D0;

  /* Radius scale (non-default) */
  --radius-1:6px;   /* small buttons, inputs */
  --radius-2:12px;  /* chips, pills */
  --radius-3:18px;  /* big buttons, nav items */
  --radius-4:24px;  /* cards, search shell */
  --radius-pill:9999px;

  /* Motion */
  --dur-fast:120ms;
  --dur-base:200ms;
  --ease-snap:cubic-bezier(.22,1,.36,1);
  --hdr-ms:220ms;
  --hdr-ease:cubic-bezier(.22,.61,.36,1);

  /* Header layout */
  --header-left:var(--sidebar-w);  /* set from sidebar width */

  /* Action colors */
  --button-primary:#0B5BD3;
  --button-primary-hover:#0A53C1;

  /* Availability badges */
  --badge-in-bg:#D6FBEF;
  --badge-in-text:#046C4E;
  --badge-out-bg:#FCE2E6;
  --badge-out-text:#8C1D2E;
  --badge-unknown-bg:#E8EEF7;
  --badge-unknown-text:#2B3A55;

  /* Memory stripe */
  --stripe-from:#22E0E0;
  --stripe-to:#12B6C5;

  /* Catalog imagery */
  --catalog-image-surface:#f7f8fd;
  --catalog-image-stroke:rgba(15,23,42,0.06);
  --catalog-image-vignette:linear-gradient(180deg,rgba(14,23,42,0.02) 0%,rgba(14,23,42,0.01) 55%,rgba(14,23,42,0.03) 100%);
  --catalog-image-floor:linear-gradient(180deg,rgba(14,23,42,0) 68%,rgba(14,23,42,0.08) 100%);
  --catalog-image-placeholder:rgba(14,23,42,0.16);
  --catalog-card-surface:#ffffff;
  --catalog-card-surface-hover:#ffffff;
  --catalog-card-ring-idle:rgba(15,23,42,0.14);
  --catalog-card-ring-hover:rgba(15,23,42,0.18);
  --catalog-card-ring-selected:rgba(33,212,214,0.42);
  --catalog-card-shadow:0 24px 44px -30px rgba(15,23,42,0.48),0 8px 20px -24px rgba(15,23,42,0.14);
  --catalog-card-shadow-hover:0 34px 60px -28px rgba(15,23,42,0.56),0 16px 32px -22px rgba(15,23,42,0.2);
  --catalog-focus-ring:rgba(33,212,214,0.92);
  --catalog-focus-glow:rgba(33,212,214,0.22);
  --catalog-cta-bg:linear-gradient(135deg,#4a63d8 0%,#3d56c8 100%);
  --catalog-cta-bg-hover:linear-gradient(135deg,#5069df 0%,#435dcd 100%);
  --catalog-cta-shadow:0 18px 32px -20px rgba(34,57,126,0.45);
  --catalog-cta-bg-disabled:linear-gradient(135deg,rgba(74,99,216,0.24) 0%,rgba(61,86,200,0.2) 100%);
}

input[type='search']::-webkit-search-cancel-button,
input[type='search']::-webkit-search-decoration,
input[type='search']::-webkit-search-results-button,
input[type='search']::-webkit-search-results-decoration {
  display: none;
}

input[type='search']::-ms-clear {
  display: none;
  width: 0;
  height: 0;
}

input[type='search'] {
  -webkit-appearance: none;
}

/* Light-mode fallback if needed */
@media (prefers-color-scheme: light){
  :root{
    --brand-bg:#0f2031;
    --surface-pop:#f5f7fb;
    --surface-pop-2:#f8fafc;
    --surface-ring:#cbd5e1;
    --text:#0f2031;
    --text-muted:#41566f;
    --overlay:rgba(2,12,27,.35);
    --elev-shadow:
      0 24px 48px -24px rgba(15,23,42,0.24),
      0 14px 32px -16px rgba(15,23,42,0.16),
      0 4px 12px -4px rgba(15,23,42,0.12);
  }
}

.dark{
  --catalog-image-surface:#1a2b46;
  --catalog-image-stroke:rgba(255,255,255,0.16);
  --catalog-image-vignette:linear-gradient(180deg,rgba(0,0,0,0.32) 0%,rgba(0,0,0,0.18) 55%,rgba(0,0,0,0.28) 100%);
  --catalog-image-floor:linear-gradient(180deg,rgba(0,0,0,0) 70%,rgba(0,0,0,0.28) 100%);
  --catalog-image-placeholder:rgba(255,255,255,0.2);
  --catalog-card-surface:rgba(13,19,32,0.88);
  --catalog-card-surface-hover:rgba(13,19,32,0.94);
  --catalog-card-ring-idle:rgba(148,163,184,0.32);
  --catalog-card-ring-hover:rgba(148,163,184,0.42);
  --catalog-card-ring-selected:rgba(33,212,214,0.65);
  --catalog-card-shadow:0 28px 48px -30px rgba(2,6,23,0.72),0 8px 22px -20px rgba(2,6,23,0.5);
  --catalog-card-shadow-hover:0 36px 60px -26px rgba(2,6,23,0.76),0 16px 32px -20px rgba(2,6,23,0.62);
  --catalog-focus-ring:rgba(99,233,236,0.92);
  --catalog-focus-glow:rgba(33,212,214,0.3);
  --catalog-cta-bg:linear-gradient(135deg,rgba(96,126,236,0.92) 0%,rgba(83,108,224,0.92) 100%);
  --catalog-cta-bg-hover:linear-gradient(135deg,rgba(106,138,244,0.96) 0%,rgba(94,121,230,0.96) 100%);
  --catalog-cta-shadow:0 20px 36px -20px rgba(8,15,35,0.62);
  --catalog-cta-bg-disabled:linear-gradient(135deg,rgba(120,140,220,0.24) 0%,rgba(108,128,208,0.24) 100%);
}

[data-chrome-layer], #catalogHeader {
  transition: transform var(--hdr-ms) var(--hdr-ease), opacity var(--hdr-ms) var(--hdr-ease);
  will-change: transform;
}

@media (prefers-reduced-motion: reduce) {
  [data-chrome-layer], #catalogHeader {
    transition: none;
  }
}

/* Base look for any floating panel */
.pop-chrome,
.tw-pop{
  background:
    linear-gradient(
      160deg,
      color-mix(in oklab, var(--surface-pop) 95%, transparent) 0%,
      color-mix(in oklab, var(--surface-pop-2) 92%, transparent) 100%
    );
  color:var(--text);
  border:1px solid color-mix(in oklab, var(--surface-ring) 82%, transparent);
  border-radius:var(--radius-xl);
  box-shadow:
    var(--elev-shadow),
    0 12px 32px -18px color-mix(in oklab, var(--brand-bg) 32%, transparent),
    0 0 0 1px color-mix(in oklab, var(--surface-ring) 70%, transparent);
  backdrop-filter:saturate(120%) blur(10px);
}

.tw-pop{ padding:0.5rem; }

/* Section label + dividers */
.pop-section,
.tw-label{
  color:var(--text-muted);
  font-size:12px;
  letter-spacing:.02em;
  text-transform:uppercase;
}
.tw-label{ padding:0 0.5rem 0.25rem; }
.tw-label.normal-case{
  text-transform:none;
  letter-spacing:0;
}
.pop-div{ height:1px; background:color-mix(in oklab, var(--surface-ring) 24%, transparent); }

/* Selected row */
.pop-item,
.tw-row{
  display:grid;
  grid-template-columns:32px 1fr auto;
  gap:10px;
  align-items:center;
  min-height:48px;
  padding:12px 14px;
  border-radius:10px;
  font-size:14px;
  font-weight:500;
  line-height:1.2;
  color:var(--text);
  outline:1px solid transparent;
  cursor:pointer;
  transition:background var(--enter), outline var(--enter), box-shadow var(--enter), color var(--enter);
}

.cart-button-pulse{
  animation:cartButtonPulse 0.78s var(--ease-snap, cubic-bezier(.22,1,.36,1));
}

.cart-button-pulse::after{
  content:"";
  position:absolute;
  inset:50% auto auto 50%;
  width:140%;
  height:140%;
  transform:translate(-50%, -50%) scale(.82);
  border-radius:999px;
  background:radial-gradient(circle at center, rgba(245,158,11,.42) 0%, rgba(245,158,11,0) 65%);
  opacity:0;
  pointer-events:none;
  animation:cartButtonGlow 0.78s var(--ease-snap, cubic-bezier(.22,1,.36,1));
}

@keyframes cartButtonPulse{
  0%{ transform:translateY(0) scale(1); }
  30%{ transform:translateY(-1px) scale(1.08); }
  62%{ transform:translateY(0) scale(1); }
  100%{ transform:translateY(0) scale(1); }
}

@keyframes cartButtonGlow{
  0%{ opacity:0; transform:translate(-50%, -50%) scale(.82); }
  28%{ opacity:.7; transform:translate(-50%, -50%) scale(1); }
  70%{ opacity:0; transform:translate(-50%, -50%) scale(1.18); }
  100%{ opacity:0; transform:translate(-50%, -50%) scale(1.22); }
}

@media (prefers-reduced-motion: reduce){
  .cart-button-pulse,
  .cart-button-pulse::after{
    animation:none !important;
  }
}
.tw-row-loose{
  min-height:48px;
  padding-top:14px;
  padding-bottom:14px;
}
.pop-item>*:not(svg),
.tw-row>*:not(svg){
  min-width:0;
}

:is(.pop-item:not(.pop-item-plain),.tw-row:not(.tw-row-plain))[aria-selected="true"],
:is(.pop-item:not(.pop-item-plain),.tw-row:not(.tw-row-plain))[data-state="open"],
:is(.pop-item:not(.pop-item-plain),.tw-row:not(.tw-row-plain))[data-selected="true"],
:is(.pop-item:not(.pop-item-plain),.tw-row:not(.tw-row-plain))[data-highlighted],
:is(.pop-item:not(.pop-item-plain),.tw-row:not(.tw-row-plain))[data-state="checked"],
:is(.pop-item:not(.pop-item-plain),.tw-row:not(.tw-row-plain)):hover{
  background-color:transparent;
  outline:1px solid color-mix(in oklab, var(--brand-accent) 45%, transparent);
}

:is(.pop-item-plain,.tw-row-plain)[aria-selected="true"],
:is(.pop-item-plain,.tw-row-plain)[data-state="open"],
:is(.pop-item-plain,.tw-row-plain)[data-selected="true"],
:is(.pop-item-plain,.tw-row-plain)[data-highlighted],
:is(.pop-item-plain,.tw-row-plain)[data-state="checked"],
:is(.pop-item-plain,.tw-row-plain):hover{
  background-color:transparent;
  outline:1px solid color-mix(in oklab, var(--surface-ring) 80%, transparent);
}

/* Accent pill */
.pop-accent{
  background:var(--brand-accent);
  color:var(--brand-accent-fg);
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0 0.5rem;
  font-size:12px;
  font-weight:600;
  line-height:1.2;
}

/* Focus ring */
:where(button,[role="menuitem"],[role="menuitemradio"],a,.pop-item,.tw-row):focus-visible{
  outline:2px solid var(--brand-accent);
  outline-offset:2px;
}

/* Keyboard hint */
.tw-kbd{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:1.5rem;
  height:18px;
  padding:0 0.35rem;
  font-size:12px;
  font-weight:500;
  line-height:1;
  border-radius:9999px;
  border:1px solid color-mix(in oklab, var(--surface-ring) 26%, transparent);
  background:color-mix(in oklab, var(--surface-pop) 8%, transparent);
  color:color-mix(in oklab, var(--text-muted) 85%, transparent);
}

/* Reusable motif */
.memory-stripe{ height:2px; background:linear-gradient(90deg,var(--stripe-from),var(--stripe-to)); }

/* Numbers align perfectly in tables/badges */
.ui-numeric{ font-variant-numeric: tabular-nums; }

/* Basic line clamp utilities for legacy Tailwind setup */
.line-clamp-1,
.line-clamp-2,
.line-clamp-3{ display:-webkit-box; -webkit-box-orient:vertical; overflow:hidden; }
.line-clamp-1{ -webkit-line-clamp:1; }
.line-clamp-2{ -webkit-line-clamp:2; }
.line-clamp-3{ -webkit-line-clamp:3; }

/* Lucide icons */
svg.lucide{ stroke-width:1.75; }
.icon-16{ width:16px; height:16px; }
.icon-18{ width:18px; height:18px; }
.icon-20{ width:20px; height:20px; }

/* Availability badges */
.badge{ display:inline-flex; align-items:center; gap:6px;
  height:28px; padding:0 12px; border-radius:var(--radius-pill);
  font-size:13px; line-height:1.1; font-weight:600;
}
.badge--in{ background:var(--badge-in-bg); color:var(--badge-in-text); }
.badge--out{ background:var(--badge-out-bg); color:var(--badge-out-text); }
.badge--unknown{ background:var(--badge-unknown-bg); color:var(--badge-unknown-text); }

/* Catalog grid card styling */
.catalog-card{ position:relative; border-radius:20px; background:var(--catalog-card-surface); box-shadow:var(--catalog-card-shadow) !important; transition:transform var(--dur-base) var(--ease-snap), box-shadow var(--dur-base) var(--ease-snap), background-color var(--dur-base) var(--ease-snap); }
.catalog-card::before{ content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none; box-shadow:0 0 0 1px var(--catalog-card-ring-idle) !important; transition:box-shadow var(--dur-base) var(--ease-snap); }
.catalog-card::after{ content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none; box-shadow:0 0 0 0 var(--catalog-focus-ring),0 0 0 0 var(--catalog-focus-glow); opacity:0; transition:box-shadow var(--dur-base) var(--ease-snap), opacity var(--dur-base) var(--ease-snap); }
.catalog-card:hover{ background:var(--catalog-card-surface-hover); box-shadow:var(--catalog-card-shadow-hover) !important; }
.catalog-card:hover::before{ box-shadow:0 0 0 1px var(--catalog-card-ring-hover) !important; }
.catalog-card:focus-within::after{ opacity:1; box-shadow:0 0 0 2px var(--catalog-focus-ring),0 0 0 6px var(--catalog-focus-glow); }
.catalog-card[data-in-cart]{ background:var(--catalog-card-surface-hover); box-shadow:var(--catalog-card-shadow-hover) !important; }
.catalog-card[data-in-cart]::before{ box-shadow:0 0 0 1px var(--catalog-card-ring-selected) !important; }
.catalog-card[data-in-cart]:hover::before,.catalog-card[data-in-cart]:focus-within::before{ box-shadow:0 0 0 1px var(--catalog-card-ring-selected) !important; }

.catalog-card__glint{ display:none; }

.catalog-card__surface{ position:relative; border-radius:16px; overflow:hidden; background:var(--catalog-image-surface); transition:background-color var(--dur-base) var(--ease-snap), box-shadow var(--dur-base) var(--ease-snap); }
.catalog-card__surface::before{ content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none; box-shadow:inset 0 0 0 1px var(--catalog-image-stroke); }
.catalog-card__surface::after{ content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none; background:var(--catalog-image-floor); opacity:.7; }
.catalog-card__image-frame{ position:relative; z-index:1; display:flex; width:100%; height:100%; align-items:center; justify-content:center; padding:clamp(14px,2.4vw,18px); }
.catalog-card__image{ display:block; max-width:84%; max-height:84%; object-fit:contain; object-position:center; }
.catalog-card__image-placeholder{ width:100%; height:100%; border-radius:12px; background:linear-gradient(135deg,var(--catalog-image-placeholder) 0%,rgba(255,255,255,0.02) 100%); opacity:.65; }
.dark .catalog-card__image-placeholder{ background:linear-gradient(135deg,var(--catalog-image-placeholder) 0%,rgba(255,255,255,0.06) 100%); }

.catalog-card__badge-layer{ position:absolute; inset:0; pointer-events:none; display:flex; justify-content:flex-end; align-items:flex-start; padding:12px; gap:8px; }
.catalog-card__badge-layer > *{ pointer-events:auto; }
.catalog-card__badge-layer > *:not(:first-child){ display:none; }
.catalog-card__count-chip{ display:inline-flex; min-width:28px; height:28px; align-items:center; justify-content:center; padding:0 8px; border-radius:999px; font-size:12px; font-weight:600; color:rgb(14,23,42); background:rgba(33,212,214,0.18); backdrop-filter:blur(6px); box-shadow:0 10px 18px -14px rgba(15,23,42,0.45); }
.dark .catalog-card__count-chip{ color:var(--text-on-dark); background:rgba(33,212,214,0.32); box-shadow:0 10px 18px -14px rgba(2,6,23,0.65); }

.catalog-card__title{ display:-webkit-box; -webkit-box-orient:vertical; overflow:hidden; font-size:16px; font-weight:600; line-height:1.35; letter-spacing:-0.01em; color:hsl(var(--foreground)); }
.dark .catalog-card__title{ color:var(--text-on-dark); }
.catalog-card__title-link{ color:inherit; text-decoration:none; transition:color var(--dur-base) var(--ease-snap); }
.catalog-card__title-link:hover{ color:hsl(var(--foreground) / 0.88); }
.dark .catalog-card__title-link:hover{ color:rgba(230,237,246,0.85); }
.catalog-card__title-link:focus-visible{ outline:none; }
.catalog-card__meta{ margin-top:0; font-weight:500; color:hsl(var(--muted-foreground) / 0.85); min-height:1.2rem; }
.dark .catalog-card__meta{ color:rgba(226,232,240,0.7); }

.catalog-chip{ display:inline-flex; align-items:center; gap:8px; padding:0 14px; height:28px; border-radius:var(--radius-pill); background:hsl(var(--secondary) / 0.55); color:hsl(var(--secondary-foreground) / 0.82); font-size:13px; font-weight:600; white-space:nowrap; }
.dark .catalog-chip{ background:rgba(148,163,184,0.18); color:rgba(226,232,240,0.85); }
.catalog-chip--quiet{ background:hsl(var(--muted) / 0.8); color:hsl(var(--muted-foreground)); }
.catalog-chip--pulse{ animation:catalog-chip-pulse 160ms ease-out; }

.catalog-card__footer{ container-type:inline-size; position:relative; background:
    linear-gradient(
      180deg,
      color-mix(in oklab, hsl(var(--muted)) 14%, transparent) 0%,
      transparent 88%
    );
  box-shadow:inset 0 1px 0 color-mix(in oklab, hsl(var(--border)) 58%, transparent);
}
.catalog-card__footer > *{ position:relative; z-index:1; }
.dark .catalog-card__footer{ background:
    linear-gradient(
      180deg,
      color-mix(in oklab, hsl(var(--muted)) 24%, transparent) 0%,
      transparent 90%
    );
  box-shadow:inset 0 1px 0 color-mix(in oklab, hsl(var(--border)) 68%, transparent);
}
.catalog-card__footer-meta{ gap:0.65rem; }
.catalog-card__footer-actions{ justify-content:flex-end; gap:0.75rem; }
.catalog-card__supplier-label{ display:block; flex:1 1 auto; min-width:0; max-width:100%; font-size:13px; font-weight:600; color:hsl(var(--foreground) / 0.68); transition:opacity var(--dur-base) var(--ease-snap); }
.dark .catalog-card__supplier-label{ color:rgba(226,232,240,0.78); }
@container (max-width: 220px){
  .catalog-card__supplier-label{ display:none; }
}

.catalog-card__price{ white-space:nowrap; font-size:15px; font-weight:600; color:hsl(var(--foreground) / 0.9); }
.dark .catalog-card__price{ color:rgba(230,237,246,0.9); }

.catalog-card__cta{ display:inline-flex; align-items:center; justify-content:center; gap:0.4rem; min-height:40px; min-width:40px; border-radius:999px; background:var(--catalog-cta-bg); color:hsl(var(--primary-foreground)); box-shadow:var(--catalog-cta-shadow); transition:background var(--dur-base) var(--ease-snap), transform var(--dur-base) var(--ease-snap); }
.catalog-card__cta:hover:not(:disabled){ background:var(--catalog-cta-bg-hover); }
.catalog-card__cta:disabled{ background:var(--catalog-cta-bg-disabled); color:hsl(var(--primary-foreground) / 0.76); box-shadow:none; }
.catalog-card__cta--primary{ padding:0 18px; font-size:14px; font-weight:600; }
.catalog-card__cta--primary:disabled{ color:hsl(var(--primary-foreground) / 0.7); }
.catalog-card__cta--muted{ padding:0 18px; font-size:13px; font-weight:600; border-radius:999px; background:rgba(148,163,184,0.18); color:hsl(var(--foreground) / 0.72); border:1px solid rgba(148,163,184,0.3); }
.dark .catalog-card__cta--muted{ background:rgba(148,163,184,0.18); color:rgba(226,232,240,0.85); border-color:rgba(148,163,184,0.35); }

.catalog-card__stepper{ display:inline-flex; align-items:center; gap:0.35rem; padding:4px; border-radius:999px; background:rgba(15,23,42,0.05); border:1px solid rgba(15,23,42,0.1); }
.dark .catalog-card__stepper{ background:rgba(15,23,42,0.6); border-color:rgba(148,163,184,0.35); }
.catalog-card__stepper-btn{ color:hsl(var(--foreground)); }
.catalog-card__stepper-btn:hover:not(:disabled){ background:rgba(255,255,255,0.7); }
.dark .catalog-card__stepper-btn{ color:var(--text-on-dark); }
.dark .catalog-card__stepper-btn:hover:not(:disabled){ background:rgba(255,255,255,0.18); }
.catalog-card__stepper-btn:disabled{ opacity:.45; }
.catalog-card__stepper-count{ min-width:42px; height:32px; padding:0 6px; border-radius:999px; display:inline-flex; align-items:center; justify-content:center; font-variant-numeric:tabular-nums; font-weight:600; font-size:14px; color:hsl(var(--foreground)); background:rgba(255,255,255,0.78); box-shadow:inset 0 0 0 1px rgba(15,23,42,0.08); }
.dark .catalog-card__stepper-count{ background:rgba(12,19,32,0.75); color:var(--text-on-dark); box-shadow:inset 0 0 0 1px rgba(148,163,184,0.35); }

@keyframes catalog-card-glint{
  0%{ transform:translateX(-130%); opacity:0; }
  10%{ opacity:.3; }
  50%{ opacity:.6; }
  100%{ transform:translateX(130%); opacity:0; }
}

@keyframes catalog-chip-pulse{
  0%{ transform:scale(1); box-shadow:0 0 0 0 rgba(33,212,214,0); }
  40%{ transform:scale(1.05); box-shadow:0 0 0 6px rgba(33,212,214,.15); }
  100%{ transform:scale(1); box-shadow:0 0 0 0 rgba(33,212,214,0); }
}

@media (prefers-reduced-motion: reduce){
  .catalog-card{ transition:none; }
  .catalog-card__glint{ animation:none !important; }
  .catalog-chip--pulse{ animation:none; }
}
