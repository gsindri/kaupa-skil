html {
  scrollbar-gutter: stable both-edges;
}

:root {
  --layout-rail: 72px;     /* nav rail width */
  --page-max: 1440px;      /* shared marketing + app max width (matches widened app shell) */
  --page-gutter: 2rem;     /* responsive page padding (lg: 32px) */
  --header-h: 56px;        /* unified header height */
  --toolbar-h: var(--header-h, 56px); /* toolbar follows header */
  --chrome-h: var(--header-h);  /* chrome follows header */
  --align-cap: min(
    var(--page-max),
    calc(100dvw - var(--layout-rail, 72px) - (2 * var(--page-gutter)))
  );
  --sidebar-push: 0px;     /* dynamically updated by AppLayout */
  --header-left: var(--layout-rail);

  /* Filters panel tokens */
  --filters-w: 320px;      /* desktop panel width */
  --filters-w-mobile: min(92vw, 360px); /* mobile drawer width */
  --filters-transition: 200ms cubic-bezier(0.4, 0, 0.2, 1);

  /* top bar sizing + radii */
  --icon-btn: 40px;
  --chip-h: 40px;
  --r-chip: 12px;
  --r-pill: 9999px;
  --gap: 12px;
  --icon: 24px;

  /* Visual tokens */
  --topbar-bg: radial-gradient(120% 80% at 0% 0%, #0f2237 0%, #0b1b2e 60%, #0a1930 100%);
  --toolbar-bg: rgba(15, 26, 41, 0.88);
  --chip-bg: rgba(255, 255, 255, 0.14);
  --chip-bg-hover: rgba(255, 255, 255, 0.18);
  --seg-active-bg: rgba(255, 255, 255, 0.18);

  --ink-hi: #ecf2f8;
  --ink: rgba(236, 242, 248, 0.88);
  --ink-dim: rgba(236, 242, 248, 0.68);

  /* Catalog filters sidebar tokens */
  --filters-bg: #1e2631;
  --filters-surface: #2a323e;
  --filters-surface-subtle: rgba(255, 255, 255, 0.04);
  --filters-border: rgba(255, 255, 255, 0.12);
  --filters-border-strong: rgba(255, 255, 255, 0.18);
  --filters-text-primary: #f2f5fa;
  --filters-text-secondary: #c5cad5;
  --filters-text-muted: #9097a5;
  --filters-chip-bg: rgba(255, 255, 255, 0.1);
  --filters-chip-hover: rgba(255, 255, 255, 0.16);
  --filters-chip-border: rgba(255, 255, 255, 0.15);
  --filters-field-bg: rgba(17, 26, 36, 0.65);
  --filters-field-border: rgba(255, 255, 255, 0.08);
  --filters-scroll-track: rgba(10, 16, 24, 0.45);
  --filters-scroll-thumb: rgba(255, 255, 255, 0.18);
  --filters-focus: rgba(46, 230, 214, 0.6);

  --accent-fill: #e1c182;
  --accent-ink: #242424;

  --ring-idle: rgba(255, 255, 255, 0.1);
  --ring-hover: rgba(255, 255, 255, 0.2);
  --ring: var(--ring-idle);
  --focus: #28d7ff;

  --z-rail: 60;      /* highest - sidebar always on top */
  --z-stripe: 56;    /* cyan stripe above header */
  --z-header: 55;    /* header content on top */
  --z-chrome: 50;    /* chrome background below header */
  --z-popover: 70;   /* overlay surfaces (menus, popovers) */
  --z-dialog-overlay: 72; /* global dialog overlay layer */
  --z-dialog-content: 80; /* spotlight/dialog content */

  /* Cart rail tokens */
  --cart-rail-w: 240px;           /* cart width when open */
  --cart-rail-transition: 240ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Catalog toolbar tokens */
  --toolbar-ring: 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
  --toolbar-shadow: 0 28px 60px rgba(3, 10, 22, 0.55);

  /* Elevated surfaces */
  --surface-raised: rgba(10, 22, 36, 0.78);
  --surface-raised-strong: rgba(14, 30, 50, 0.92);
  --r-card: 20px;

  --ctrl-h: 40px;
  --ctrl-r: 12px;
  --icon-btn: 40px;

  --field-bg: #0f1b28;
  --field-bg-elev: #112133;
  --field-ring: rgba(255, 255, 255, 0.1);
}

.public-shell {
  width: 100%;
  max-width: var(--page-max);
  margin-left: var(--layout-rail, 72px);
  margin-right: auto;
  padding-left: var(--page-gutter);
  padding-right: var(--page-gutter);
}

@media (max-width: 1024px) {
  :root {
    --page-gutter: 1.5rem;  /* md: 24px */
  }
}

@media (max-width: 1023px) {
  :root {
    --layout-rail: 0px;
  }

  .public-shell {
    margin-left: 0;
  }
}

@media (max-width: 640px) {
  :root {
    --page-gutter: 1.25rem;  /* sm: 20px */
  }
}

/* Filters panel mobile drawer */
@media (max-width: 1023px) {
  .filters-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.32);
    backdrop-filter: blur(4px);
    z-index: var(--z-popover, 70);
  }

  .filters-drawer {
    position: fixed;
    inset: 0 auto 0 0;
    width: var(--filters-w-mobile);
    height: 100vh;
    background: hsl(var(--background));
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25);
    z-index: calc(var(--z-popover, 70) + 1);
    overflow-y: auto;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .transition-\[width\] {
    transition: none !important;
  }
  
  .filters-drawer,
  .filters-backdrop {
    transition: none !important;
  }
}
